<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO & Social Sharing -->
    <title>ðŸŽ® Rat Games</title>
    <link rel="icon" href="https://ratgames.netlify.app/media/favicon.png" type="image/png" />
    <link rel="manifest" href="/install/manifest.json">
    <meta name="description" content="Play unblocked games like Subway Surfers, Minecraft, and Moto X3M at RatGames â€” the meme-powered site with spinning rats, no downloads, and full browser support.">
    <meta name="keywords" content="unblocked games, free games online, browser games, school games, HTML5 games, play games at school, meme games, no download games, fun web games, RatGames, funny games, safe games for school, rat website, coolmath alternative, game site with rats">
    <link rel="canonical" href="https://ratgames.netlify.app/">

    <!-- Open Graph (for social sharing previews) -->
    <meta property="og:title" content="ðŸ€ðŸŽ® RatGames â€“ Meme-Powered Unblocked Games">
    <meta property="og:description" content="Play unblocked browser games with spinning rats. Featuring Subway Surfers, Minecraft, Moto X3M and more!">
    <meta property="og:image" content="https://ratgames.netlify.app/media/rat-spinning.gif">
    <meta property="og:url" content="https://ratgames.netlify.app/">
    <meta name="twitter:card" content="summary_large_image">

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background: #121212 url('https://ratgames.netlify.app/media/rat-spinning.gif') no-repeat center -100px fixed;
            background-size: contain;
            font-family: 'Comic Sans MS', sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        h1 {
            font-size: 5em;
            margin: 0;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8);
        }

        #dailyText {
            font-size: 2em;
            margin: 0;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        }

        .button-container {
            margin-top: 30px;
        }

        .btn {
            background-color: #333;
            color: white;
            font-size: 20px;
            padding: 15px 30px;
            margin: 10px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .btn:hover {
            background-color: #555;
        }

        @media (max-width: 600px) {
            .btn {
                width: 80%;
            }
        }

        #fullscreen-btn, #installBtn {
            position: fixed;
            top: 10px;
            background-color: #333;
            border: none;
            border-radius: 10px;
            padding: 10px;
            cursor: pointer;
            z-index: 1001;
            transition: background-color 0.3s ease;
            color: white;
        }

        #fullscreen-btn {
            right: 10px;
        }

        #installBtn {
            right: 60px;
            display: none;
        }

        #fullscreen-btn:hover,
        #installBtn:hover {
            background-color: #555;
        }

        #fullscreen-btn img {
            display: block;
            height: 24px;
            pointer-events: none;
        }

        #corner-ads {
            position: fixed;
            bottom: 10px;
            left: 10px;
            z-index: 1000;
            font-size: 12px;
            color: white;
        }

        #corner-ads a {
            color: #007BFF;
            text-decoration: none;
        }

        #corner-ads a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Install Button -->
    <button id="installBtn">ðŸ“¥ Install</button>

    <!-- Fullscreen Button -->
    <button id="fullscreen-btn" onclick="toggleFullscreen()" title="Toggle Fullscreen">
        <img src="/media/fullscreen.png" alt="Fullscreen">
    </button>

    <h1>Rat Games</h1>
    <h2 id="dailyText"></h2>

    <div class="button-container">
        <button class="btn" onclick="window.location.href='/games/'">Games</button>
        <button class="btn" onclick="window.location.href='/tools/'">Tools/Apps</button>
        <button class="btn" onclick="window.location.href='/survey.html'">Request Game/Feedback</button>
        <button class="btn" onclick="window.location.href='/terms.html'">Terms Of Use</button>
    </div>

    <script>
        const texts = [
            "By the students, for the students",
            "I always come back",
            "Make sure to share this with your friends",
            "If we don't have a game, request it",
            "I have to walk my fish hold up"
        ];

        function getCurrentIndex() {
            const lastUpdate = localStorage.getItem('lastUpdateTime');
            const storedIndex = localStorage.getItem('textIndex');
            const now = new Date().getTime();
            
            if (!lastUpdate || now - lastUpdate >= 5000 || storedIndex === null) {
                const newIndex = (storedIndex === null ? 0 : (parseInt(storedIndex) + 1) % texts.length);
                localStorage.setItem('lastUpdateTime', now);
                localStorage.setItem('textIndex', newIndex);
                return newIndex;
            }
            return parseInt(storedIndex);
        }

        function updateText() {
            document.getElementById("dailyText").innerText = texts[getCurrentIndex()];
        }

        updateText();
        setInterval(updateText, 5000);

        function toggleFullscreen() {
            const elem = document.documentElement;
            if (!document.fullscreenElement) {
                elem.requestFullscreen?.() || elem.webkitRequestFullscreen?.() || elem.msRequestFullscreen?.();
            } else {
                document.exitFullscreen?.() || document.webkitExitFullscreen?.() || document.msExitFullscreen?.();
            }
        }

        // Register service worker and handle install prompt
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/install/service-worker.js')
                    .then(reg => console.log('Service Worker registered:', reg.scope))
                    .catch(err => console.error('Service Worker registration failed:', err));
            });
        }

        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;

            const installBtn = document.getElementById('installBtn');
            if (installBtn) installBtn.style.display = 'block';

            installBtn?.addEventListener('click', () => {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(choiceResult => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    } else {
                        console.log('User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                    installBtn.style.display = 'none';
                });
            });
        });
    </script>

    <!-- Bottom-left corner ad/stat section -->
    <div id="corner-ads">
        <script type="text/javascript" src="https://www.stat-counter.org/count/hrr5"></script><br>
        <a href='https://www.pferdeversicherung.at/pferdekrankenversicherung/'>Pferd Krankenversicherung</a>
        <script type='text/javascript' src='https://whomania.com/ctr?id=53c00ac54c6be6c4b82dc1121e77b8897a9e9cbf'></script>
    </div>
</body>
</html>
